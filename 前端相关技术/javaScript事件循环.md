## javaScript事件循环

为什么javaScript是单线程？（避免复杂性）

> JavaScript语言的一大特点就是单线程，也就是说，同一个时间只能做一件事。那么，为什么JavaScript不能有多个线程呢？这样能提高效率啊。 
>
> JavaScript的单线程，与它的用途有关。作为浏览器脚本语言JavaScript的主要用途是与用户互动，以及操作DOM。这决定了它只能是单线程，否则会带来很复杂的同步问题。
>
> 比如，假定JavaScript同时有两个线程，一个线程在某个DOM节点上添加内容，另一个线程删除了这个节点，这时浏览器应该以哪个线程为准？ 所以，为了避免复杂性，从一诞生，JavaScript就是单线程，这已经成了这门语言的核心特征 。

主线程

> JS引擎中负责解释和执行JavaScript代码的线程只有一个，就叫做**主线程**，实际上还有其它的线程，例如处理AJAX请求的线程、处理DOM事件的线程、定时器线程等等。

异步的实现

> - 主线程发起一个异步请求，相应的工作线程接收请求并告知主线程已收到(异步函数返回)； 
> - 主线程可以继续执行后面的代码，同时工作线程执行异步任务； 
> - 工作线程完成工作后，通知主线程； 
> - 主线程收到通知后，执行一定的动作(调用回调函数)。 
>
> 最常用的DOM事件就是异步行为，例如有如下代码：
>
> ```javaScript
> var button = document.getElement('#btn');
> button.addEventListener('click', function(e) {
>     console.log('按钮');
> });
> ```
>
> 从事件的角度来看，上述代码表示：在按钮上添加了一个鼠标单击事件的事件监听器；当用户点击按钮时，鼠标单击事件触发，事件监听器函数被调用。 
>
> 从异步过程的角度看，addEventListener函数就是异步过程的发起函数，事件监听函数就是异步过程的回调函数。 事件触发时，表示异步任务完成，会将事件监听器函数封装成一条消息放到消息队列中，等待主线程执行。 





参考文章

> https://segmentfault.com/a/1190000010292798