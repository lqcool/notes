## 原型模式

> 一种特殊的创建型模式，当需要创建大量相同的对象，可以通过对一个已有对象的复制获得更多的对象。

### 原型模式的定义

> 原型模式是一种对象创建型模式，用原型模式实例指定创建对象的种类，并且通过复制这些原型创建新的对象，原型模式允许一个对象再创建另外一个可定制的对象，无需知道任何创建的细节。

### 原型模式的结构和分析

> 原型模式结构图：
>
> ![25](https://github.com/LQ55/notes/blob/master/%E4%BB%93%E5%BA%93%E5%9B%BE%E5%BA%93/25.png)
>
> 原型模式中：
>
> - Prototype（抽象原型类，就如同java中的Object一样）
>
>   **抽象原型类定义具有克隆自己的方法的接口**，是所有原型类的父类，可以是抽象类，也可以是接口
>
> - ConcretePrototype（具体原型类）
>
>   具体原型类实现**具体的克隆方法，在克隆方法中返回自己的一个克隆对象**
>
> - Client（客户类）
>
>   让原型克隆自身，从而创建一个新对象，**客户端只需要直接实例化或通过工厂方法等方式创建一个对象**，在通过**调用对象的克隆方法**得到更多的相同的对象。
>
> 在java中，所有的java类都继承自java.lang.Object类，该类提供一个clone()方法，可以复制自身。需要注意的是能够实现克隆的java类必须实现一个**标识接口Cloneable**，表示这个java类支持复制。否则将报错**CloneNotSupportedException** 。

### 深克隆和浅克隆

> 浅克隆：
>
> 被复制对象的所有普通成员变量与原来的对象具有相同的值，**但是所有的其它对象的引用指向原来的对象** 。
>
> ![26](https://github.com/LQ55/notes/blob/master/%E4%BB%93%E5%BA%93%E5%9B%BE%E5%BA%93/26.png)
>
> 深克隆：
>
> 被复制对象的所有普通成员变量与原来的对象具有相同的值，**引用其它对象的变量将被指向被复制过来的新对象，而不是原来哪些被引用的对象** 。
>
> ![27](https://github.com/LQ55/notes/blob/master/%E4%BB%93%E5%BA%93%E5%9B%BE%E5%BA%93/27.png)